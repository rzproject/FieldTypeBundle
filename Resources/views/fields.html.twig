{% extends 'form_div_layout.html.twig' %}

{% block date_widget %}
    {% spaceless %}
        {% if widget == 'single_text' %}
            {% if picker_enable  and picker_use_js_init %}
            <script>
                jQuery(document).ready(function() {
                    rz_datepicker.initById('rz_datepicker_{{ id }}', {{ picker_options | json_encode | raw }});
                });
            </script>
            {% endif %}
            {{ block('form_widget_date') }}
        {% else %}
            <div {{ block('widget_container_attributes') }}>
                {{ date_pattern|replace({
                '{{ year }}':  form_widget(form.year),
                '{{ month }}': form_widget(form.month),
                '{{ day }}':   form_widget(form.day),
                })|raw }}
            </div>
        {% endif %}
    {% endspaceless %}
{% endblock date_widget %}

{% block form_widget_date %}
    {% spaceless %}
        <div class="row-fluid">
        <div class="{{ picker_container_class }}" >
            <div  {{ block('datepicker_attributes') }}>
                <input type="text" {{ block('widget_attributes') }} {% if value is not empty %}value="{{ value }}" {% endif %}/>
                <span class="add-on"><i class="icon-calendar"></i></span>
            </div>
        </div>
        </div>
    {% endspaceless %}
{% endblock form_widget_date %}


{% block time_widget %}
    {% spaceless %}
        {% if widget == 'single_text' %}
            {% if picker_enable  and picker_use_js_init %}
                <script>
                    jQuery(document).ready(function() {
                        rz_datepicker.initById({{ id }}', {{ picker_options | json_encode | raw }});
                    });
                </script>
            {% endif %}
            {{ block('form_widget_time') }}
        {% else %}
            {% set vars = widget == 'text' ? { 'attr': { 'size': 1 }} : {} %}
            <div {{ block('widget_container_attributes') }}>
            {{ form_widget(form.hour, vars) }}{% if with_minutes %}:{{ form_widget(form.minute, vars) }}{% endif %}{% if with_seconds %}:{{ form_widget(form.second, vars) }}{% endif %}
        </div>
        {% endif %}
    {% endspaceless %}
{% endblock time_widget %}

{% block form_widget_time %}
    {% spaceless %}
    <div class="row-fluid">
        <div class="{{ picker_container_class }}">
            <div class="input-append">
                <input type="text" {{ block('widget_attributes') }} {% if value is not empty %}value="{{ value }}" {% endif %}/>
                <span class="add-on"><i class="icon-remove"></i></span>
                <span class="add-on"><i class="icon-time"></i></span>
            </div>
        </div>
    </div>
    {% endspaceless %}
{% endblock form_widget_time %}

{% block datepicker_attributes %}
    {% spaceless %}
        id="rz_datepicker_{{ id }}"
        {% for attrname, attrvalue in picker_class_attr %}{{ attrname }}="{{ attrvalue }}" {% endfor %}
        {% for settingsname, settingsvalue in picker_settings %}{{ settingsname }}="{{ settingsvalue }}" {% endfor %}
    {% endspaceless %}
{% endblock datepicker_attributes %}


{% block datetime_widget %}
    {% spaceless %}
        {% if widget == 'single_text' %}
            {{ block('form_widget_datetime') }}
        {% else %}
            <div {{ block('widget_container_attributes') }}>
                {{ form_errors(form.date) }}
                {{ form_errors(form.time) }}
                {{ form_widget(form.date) }}
                {{ form_widget(form.time) }}
            </div>
        {% endif %}
    {% endspaceless %}
{% endblock datetime_widget %}


{% block form_widget_datetime %}
    {% spaceless %}
        <div class="row-fluid">
            <div class="{{ picker_container_class }}" >
                <div  {{ block('datepicker_attributes') }} data-date="{{ value }}">
                    <input type="text" {{ block('widget_attributes') }} {% if value is not empty %}value="{{ value }}" {% endif %}/>
                    <span class="add-on"><i class="icon-remove"></i></span>
                    <span class="add-on"><i class="icon-calendar"></i></span>
                </div>
            </div>
        </div>
    {% endspaceless %}
{% endblock form_widget_datetime %}

{% block choice_widget_expanded %}
    {% spaceless %}
        <div {{ block('widget_container_attributes') }}>
            {% for child in form %}
                {{ form_label(child, null, { 'expanded_custom_checkbox' : true, 'widget' : form_widget(child) } ) }}
            {% endfor %}
        </div>
    {% endspaceless %}
{% endblock choice_widget_expanded %}

{% block checkbox_switch_widget %}
    {{ form_label(form) }}
    <div class="switch" {{ block('checkbox_switch_widget_attributes') }}>
        {{ form_widget(form) }}
    </div>
{% endblock checkbox_switch_widget %}

{% block checkbox_switch_widget_attributes %}
    {% spaceless %}
        {% for attrname, attrvalue in switch_attr %}{{ attrname }}="{{ attrvalue }}" {% endfor %}
    {% endspaceless %}
{% endblock checkbox_switch_widget_attributes %}


{% block choice_widget_collapsed %}
    {% spaceless %}
        {% if (multiselect_search_enabled is defined  and multiselect_search_enabled) or
              (multiselect_enabled is defined  and multiselect_enabled) %}
        <div class="rz-multiselect-container">
            {{  block('choice_widget_element') }}
        </div>
        {% else %}
            {{  block('choice_widget_element') }}
        {% endif %}
        {% if multiselect_search_enabled is defined  and multiselect_search_enabled %}
            <script>
                jQuery(document).ready(function(){
                    jQuery('#{{ id }}').multiSelect({
                        selectableHeader: '<div class="search-header"><input type="text" class="span12" id="ms-search-{{ id }}" autocomplete="off" placeholder="search"></div>',
                        selectionHeader: "<div class='search-selected'></div>"
                    });

                    jQuery('#ms-search-{{ id }}').quicksearch(jQuery('.ms-elem-selectable')).on('keydown', function(e){
                        if (e.keyCode == 40){
                            jQuery(this).trigger('focusout');
                            jQuery('#ms-searchable').focus();
                            return false;
                        }
                    });
                });
            </script>
        {% endif %}
    {% endspaceless %}
{% endblock choice_widget_collapsed %}

{% block choice_widget_element %}
    {% spaceless %}
        <select {{ block('widget_attributes') }}{% if multiple %} multiple="multiple"{% endif %}>
            {% if empty_value is not none %}
                <option value=""{% if required %} disabled="disabled"{% if value is empty %} selected="selected"{% endif %}{% endif %}>{{ empty_value|trans({}, translation_domain) }}</option>
            {% endif %}
            {% if preferred_choices|length > 0 %}
                {% set options = preferred_choices %}
                {{ block('choice_widget_options') }}
                {% if choices|length > 0 and separator is not none %}
                    <option disabled="disabled">{{ separator }}</option>
                {% endif %}
            {% endif %}
            {% set options = choices %}
            {{ block('choice_widget_options') }}
        </select>
    {% endspaceless %}
{% endblock choice_widget_element %}


{% block file_widget %}
    {% spaceless %}

        {% if thumbnail_enabled %}
        <div class="fileupload fileupload-new" data-provides="fileupload">
            <div class="fileupload-preview thumbnail" style="width: 200px; height: 150px; line-height: 150px;">
                {% if current_subject %}{% media current_subject, 'admin' %}{% endif %}
            </div>
            <div>
                <span class="btn btn-file btn-primary sepV_a"><span class="fileupload-new"><i class="icon-file-alt"></i> Select image</span>
                <span class="fileupload-exists"><i class="icon-undo"></i> Change</span>{{ form_widget(form) }}</span>
                <a href="#" class="btn btn-danger fileupload-exists" data-dismiss="fileupload"><i class="icon-trash"></i> Remove</a>
            </div>
        </div>
        {% else %}
        <div class="fileupload fileupload-new" data-provides="fileupload">
            <div class="input-append">
                <div class="uneditable-input span3">
                    <i class="icon-file fileupload-exists"></i> <span class="fileupload-preview"></span>
                    </div><span class="btn btn-primary btn-file"><span class="fileupload-new"><i class="icon-file-alt"></i>  Select file</span>
                    <span class="fileupload-exists"><i class="icon-undo"></i> Change</span>{{ form_widget(form) }}</span>
                    <a href="#" class="btn btn-danger fileupload-exists" data-dismiss="fileupload"><i class="icon-trash"></i> Remove</a>
            </div>
        </div>
        {% endif %}
    {% endspaceless %}
{% endblock file_widget %}
